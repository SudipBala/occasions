{% extends 'index.html' %}
{% load static %}
{% block content %}

    <div>
    {% if operation == 'add' %}
        <h1> Add stock</h1>
             <form role="form" method="POST" enctype="multipart/form-data">
                 {% csrf_token%}
                 <a class="pointer modal-trigger" data-toggle="modal" data-target="#modal_item">
                     <span class="badge bg-blue">
                         <i class="fa fa-fw fa-plus-circle"></i>
                         Add Item
                     </span>
                 </a>
                 {{ form }}
                 <button type="submit" class="btn btn-primary">Submit</button>
             </form>
    {% else %}
        <h1> Edit Stock</h1>
            <form role="form" method="POST" enctype="multipart/form-data">
            {% csrf_token%}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    {% endif %}

    </div>

    <div class="modal fade" id='modal_item' tabindex="-1" role="dialog" aria-labelledby='item'>
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="myModalLabel">Add New Item</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
          </div>
          <div class="modal-body">
              <div class="dangertext" id="modal-error"></div>
            {% if form %}
                <div class="modal-form">
                    <form class='jq_item_submit' method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ item_form.as_p }}
                        <button type="submit" class="modal-action btn btn-primary">Submit</button>
                    </form>
                </div>
            {% else %}
            {% endif %}
          </div>
        </div>
      </div>
    </div>

{% endblock %}

{% block js %}
    {% include 'outlets/stock/jq-submit.html' %}

    <script>
        $('#modal_item').on('hidden.bs.modal', function () {
            $(this).find('form').trigger('reset');
        })
    </script>
{% endblock %}